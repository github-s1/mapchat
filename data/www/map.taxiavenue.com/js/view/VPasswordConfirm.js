/*  *  */define([     'underscore',    'jquery',    'backbone',     'dialog',     'config',    'view/VLoader'], function(_, $, Backbone, Dialog, Config, VLoader){    "use strict";        return Backbone.View.extend({                tagName     : 'ul',        id          : 'passwordConfirm',                events: {            "click li"     :       "send"        },                initialize: function(options){             this.parent = options.parent;            this.action = options.action;            this.callback = options.callback;            this.userId = options.userId;            this.animals = options.animals;                        this.createDialog();            this.render();                        this.setUI();        },                send: function(e) {            var animal = $(e.target).text(),                loader = new VLoader({                    data: {text: "Обмен данными ... "}                 });            var url = Config.baseUrlJSON;            if(this.action === "registerConfirm"){                url += "users_json/CheckCodeFP?action=register";            }            else {                url += "users_json/CheckCodeFP";            }                        $.ajax({                type: 'POST',                context: this,                url: url,                data: {                    id_user: this.userId,                    animal: animal                },                // После подтверждения животного                success: function(response){                    loader.remove();                    response = eval('(' + response + ')').response;                    this.parent[this.callback](response);                    this.dialog.close();                }            });        },                render: function() {            $("<span>Какое животное было указано в<br>отправленном Вам сообщении?</span>").appendTo(this.$el);            this.animals.forEach(function(animal){                $("<li>" + animal + "</li>").appendTo(this.$el);            }, this);            return this;        },        setUI: function() {            var $mainEl = this.$el.closest('div.ui-dialog.ui-widget.ui-widget-content.ui-corner-all.ui-front.ui-draggable');            var $titleEl = $mainEl.find('div.ui-dialog-titlebar.ui-widget-header.ui-corner-all.ui-helper-clearfix');            $titleEl.css('display', 'none');        },        createDialog: function() {            var options = {                modal   : true,                width   : "auto",                height  : "auto",                position: "center top",                resizable: false,                buttons : null            };            this.dialog = new Dialog({widget: this, options: options});        }    });});